<div class="container fade-in">
  <header class="header-section">
    <h2>üçø Tienda de Extras</h2>
    <p>Complementa tu experiencia con nuestros combos y bebidas</p>
  </header>

  <div class="search-bar-container">
    <input
      type="text"
      placeholder="üîç Buscar productos (ej. Vasos, Combos...)"
      class="search-input"
      (input)="onSearch($event)"
    >
  </div>

  <div class="product-grid">
    <div *ngIf="filteredProducts.length === 0 && !isLoading" class="no-data">
      <p>No se encontraron productos que coincidan con tu b√∫squeda.</p>
    </div>

    <div *ngIf="isLoading" class="no-data">
      <p>Cargando cat√°logo...</p>
    </div>

    <div class="product-card" *ngFor="let prod of filteredProducts">
      <div class="card-image">
        <img [src]="prod.imageProduct || 'assets/placeholder.png'" [alt]="prod.nameProduct">
        <span class="badge" *ngIf="prod.priceProduct > 20">Combo</span>
      </div>

      <div class="card-content">
        <h3>{{ prod.nameProduct }}</h3>
        <p class="price">$ {{ prod.priceProduct }}</p>

        <div class="card-actions">
          <button class="btn-outline" (click)="openModal(prod)">Ver Detalle</button>
          <button class="btn-primary" (click)="addToCart(prod)">
            üõí Agregar
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal-backdrop" *ngIf="selectedProduct" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="closeModal()">√ó</button>

    <div class="modal-body">
      <img [src]="selectedProduct.imageProduct || 'assets/placeholder.png'" alt="Detalle">
      <div class="modal-info">
        <h3>{{ selectedProduct.nameProduct }}</h3>

        <p class="modal-desc">
          {{ selectedProduct.descriptionProduct || 'Disfruta de este excelente complemento para tu evento.' }}
        </p>

        <div class="modal-footer">
          <span class="big-price">${{ selectedProduct.priceProduct }}</span>
          <button class="btn-primary full-width" (click)="addToCart(selectedProduct)">
            Agregar al Ticket
          </button>
        </div>
      </div>
    </div>
  </div>
</div>