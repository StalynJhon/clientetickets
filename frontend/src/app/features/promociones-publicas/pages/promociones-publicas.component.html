<div class="page">

  <div class="page-box">

    <h2>Promociones disponibles</h2>

    <div class="grid">

      <div class="card-outer" 
           *ngFor="let promo of promocionesActivas"
           [ngClass]="{'card-used': promo.used}">

        <div class="card-inner">

          <img
            src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTCGZlr4gLcP_lnP-wXWHiXholmsGihWJOqfA&s"
            alt="Promoci√≥n"
            class="promo-img"
          />

          <div class="info">

            <!-- üîπ Badge normal o ‚ÄúUsada‚Äù -->
            <span class="badge" *ngIf="!promo.used">
              -{{ promo.discountValue }}%
            </span>
            <span class="badge used" *ngIf="promo.used">
              Usada
            </span>

            <h3>{{ promo.namePromotion }}</h3>

            <!-- üí≤ PRECIOS VISUALES DE EJEMPLO -->
            <div class="precio-box">
              <span class="precio-original">
                $10.00
              </span>

              <span class="precio-final">
                ${{ calcularPrecioFinal(10, promo.discountValue) | number:'1.2-2' }}
              </span>
            </div>

            <p class="fecha">
              V√°lido hasta {{ promo.endDate | date:'dd/MM/yyyy' }}
            </p>

            <!-- BOT√ìN SIEMPRE -->
            <button
              class="btn-select"
              (click)="seleccionarPromocion(promo)">
              Seleccionar promoci√≥n
            </button>

            <!-- INPUT SOLO SI ES PROMO CON C√ìDIGO -->
            <div
              class="codigo-box"
              *ngIf="
                promo.promoCode &&
                promoSeleccionada?.id === promo.id
              ">

              <input
                type="text"
                placeholder="Ingresa el c√≥digo"
                [(ngModel)]="codigoIngresado"
              />

              <button (click)="aplicarCodigo()">
                Aplicar
              </button>
            </div>

            <!-- TEXTO INFORMATIVO -->
            <p class="auto" *ngIf="!promo.promoCode && !promo.used">
              ‚úî Promoci√≥n autom√°tica
            </p>

            <p class="codigo" *ngIf="promo.promoCode && !promo.used">
              üîê Promoci√≥n con c√≥digo
            </p>

          </div>

        </div>

      </div>

    </div>

  </div>

</div>
